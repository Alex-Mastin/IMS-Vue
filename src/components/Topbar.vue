<template>
    <header role="banner">
        <div id="header">
            <svg id="site-logo" x="0px" y="0px" width="342px" height="90px" viewBox="0 0 342 90">
                <path fill="#82BC00" d="M89.143,28.296c-3.798-2.095-8.398-3.113-14.063-3.113c-0.784,0-1.543,0.021-2.267,0.052l2.792-21.136  L62.287,8.613c-2.867,0.82-3.515,2.952-3.639,4.207l-2.212,15.068c-2.576,0.841-5.212,1.87-7.863,3.07  c-9.393,4.249-16.77,11.841-19.736,19.752c-1.983,5.29-1.915,10.529,0.197,15.149c3.378,7.39,11.625,11.802,22.062,11.802  c3.963,0,8.026-0.623,12.05-1.846c0.074-0.021-0.989,10.159-0.989,10.159l11.595-3.815c2.866-0.821,3.514-2.953,3.637-4.208  l1.607-12.77c9.488-3.125,17.007-11.534,18.233-20.689C98.159,37.546,95.212,31.642,89.143,28.296z"/>
                <path d="M87.191,30.626c-5.947-3.279-13.455-2.812-17.969-2.376l2.389-18.478l-0.293,0.126l-8.684,2.953h0.001  c-0.451,0.175-0.758,0.464-0.953,0.84c-0.004,0.002-0.017,0.037-0.017,0.037c-0.06,0.121-0.106,0.25-0.143,0.386l-0.046,0.02  l-2.27,16.099c-2.918,0.861-5.961,1.994-9.15,3.435C35.875,40.083,27.658,53.34,32.369,63.647  c4.208,9.206,17.152,12.035,29.932,8.156c0.096-0.028,1.271-0.344,1.367-0.375l0.01-0.317l4.709-36.418  c8.101-1.916,14.899-0.909,17.787,2.3c3.839,4.271,0.793,13.261-9.115,16.393l1.852-14.722L76.728,39.4l-4.85,1.605h0.001  c-0.392,0.154-0.664,0.406-0.832,0.735c-0.003,0.002-0.016,0.032-0.016,0.032c-0.101,0.211-0.166,0.446-0.188,0.711l-4.912,37.804  l6.729-2.255c0.991-0.27,1.429-0.769,1.502-1.629l1.824-14.493C91.982,58.037,100.493,37.961,87.191,30.626z M54.405,64.296  c-6.308,0.844-11.712-0.914-13.574-5.396c-2.551-6.138,2.488-13.466,11.108-18.157c2.256-1.227,4.584-2.23,6.138-2.782  L54.405,64.296z"/>
                <g>
	                <path stroke="#000000" stroke-miterlimit="10" d="M111.28,42.058h7.6c6.157,0,11.26,3.3,11.26,9.844c0,6.354-5.131,9.57-11.01,9.57   h-7.85V42.058z M116.272,57.368h2.579c3.716,0,5.769-2.053,5.769-5.466c0-3.41-2.053-5.74-5.769-5.74h-2.579V57.368z"/>
                    <path stroke="#000000" stroke-miterlimit="10" d="M137.958,53.762v3.578h9.179v4.133h-14.171V42.058h13.59v4.132h-8.597v3.439   h6.711v4.132H137.958z"/>
                    <path stroke="#000000" stroke-miterlimit="10" d="M157.315,54.955l3.993-12.897h5.047l-6.849,19.415h-4.299l-6.878-19.415h5.048   L157.315,54.955z"/>
                    <path stroke="#000000" stroke-miterlimit="10" d="M173.398,61.473h-5.047V42.058h5.047V61.473z"/>
                    <path stroke="#000000" stroke-miterlimit="10" d="M191.426,42.696V47.3c-1.139-0.638-2.413-1.054-4.3-1.054   c-4.076,0-5.657,2.773-5.657,5.547c0,2.801,1.607,5.629,5.657,5.629c1.887,0,3.051-0.165,4.3-0.72v4.41   c-1.498,0.47-3.218,0.638-4.632,0.638c-5.604,0-10.539-2.969-10.539-9.901c0-6.934,4.798-9.929,10.372-9.929   C188.707,41.92,189.845,42.225,191.426,42.696z"/>
                    <path stroke="#000000" stroke-miterlimit="10" d="M199.799,53.762v3.578h9.181v4.133h-14.172V42.058h13.59v4.132h-8.599v3.439   h6.712v4.132H199.799z"/>
                    <path fill="#82BC00" d="M217.964,42.058h5.657c3.162,0,7.044,1.276,7.044,6.074c0,4.854-3.882,6.211-6.823,6.211h-2.745v7.13   h-3.133V42.058z M221.097,51.57h2.774c1.636,0,3.521-0.693,3.521-3.438c0-2.718-1.886-3.355-3.521-3.355h-2.774V51.57z"/>
                    <path fill="#82BC00" d="M236.267,61.473h-3.161V42.058h3.161V61.473z"/>
                    <path fill="#82BC00" d="M246.75,61.473h-3.079V44.638h-5.354v-2.58h13.783v2.58h-5.351V61.473z"/>
                    <path fill="#82BC00" d="M259.339,61.75c-2.163,0-4.604-0.389-6.241-0.999v-2.662c1.305,0.444,3.827,1.025,5.991,1.025   c2.329,0,3.966-0.777,3.966-2.856c0-2.412-2.302-2.828-4.687-3.494c-2.44-0.693-4.881-1.747-4.881-5.491   c0-4.437,3.161-5.353,6.322-5.353c2.552,0,4.188,0.332,5.687,0.776l-0.028,2.69c-1.442-0.499-3.273-0.831-4.936-0.831   c-1.777,0-3.911,0.443-3.911,2.607c0,2.107,1.941,2.551,4.104,3.133c2.606,0.722,5.436,1.691,5.436,5.77   C266.161,60.668,262.693,61.75,259.339,61.75z"/>
                    <path fill="#82BC00" d="M275.591,61.473h-3.079V44.638h-5.354v-2.58h13.784v2.58h-5.351V61.473z"/>
                    <path fill="#82BC00" d="M290.787,41.92c5.797,0,10.067,3.854,10.067,9.9c0,6.047-4.271,9.93-10.067,9.93   c-5.796,0-10.066-3.883-10.066-9.93C280.721,45.774,284.991,41.92,290.787,41.92z M290.787,58.92c3.827,0,6.796-2.744,6.796-7.1   c0-4.354-2.969-7.072-6.796-7.072c-3.828,0-6.794,2.718-6.794,7.072C283.993,56.176,286.959,58.92,290.787,58.92z"/>
                    <path fill="#82BC00" d="M303.46,42.058h5.657c3.162,0,7.044,1.276,7.044,6.074c0,4.854-3.882,6.211-6.822,6.211h-2.745v7.13h-3.134   V42.058z M306.594,51.57h2.772c1.637,0,3.522-0.693,3.522-3.438c0-2.718-1.886-3.355-3.522-3.355h-2.772V51.57z"/>
                </g>
            </svg>
        </div>
        <div id="topbar">
            <div id="search-bar">
                <form id="search" autocomplete="off" @submit.prevent="search()">
                    <div id="search-left-half">
                            <span id="search-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
                                    <path d="M511.256 466.306L371.179 326.229a2.542 2.542 0 0 0-3.595 0l-11.513 11.512c31.591-35.855 50.786-82.878 50.786-134.312C406.856 91.26 315.6.001 203.428.001 91.257.001 0 91.26 0 203.43s91.257 203.426 203.428 203.426c51.432 0 98.457-19.196 134.314-50.783l-11.513 11.512a2.543 2.543 0 0 0 0 3.595l140.076 140.074a2.545 2.545 0 0 0 3.596 0l41.353-41.352a2.541 2.541 0 0 0 .002-3.596zm-307.828-92.508c-93.942 0-170.371-76.428-170.371-170.369s76.428-170.37 170.371-170.37c93.942 0 170.371 76.428 170.371 170.37S297.37 373.798 203.428 373.798z"></path>
                                </svg>
                                <span class="caret"></span>
                            </span>
                    </div>
                    <div>
                        <input id="search-right-half" placeholder="Search" maxlength="100" type="text" class="">
                        <input class="no-display" type="submit">
                    </div>
                </form>
                <search-options></search-options>
            </div>
            <a class="support-icon right" @click="routeTo('/support')" title="Support">
                <svg class="large" xmlns="http://www.w3.org/2000/svg" height="512pt" viewBox="0 0 512.00065 512" width="512pt"><path d="m490.953125 388.234375-145.386719-144.710937 29.292969-29.265626c5.007813-5.003906 12.15625-7.433593 19.171875-6.484374 32.371094 4.253906 64.226562-6.523438 87.421875-29.597657 23.265625-23.246093 34.261719-56.546875 29.425781-88.992187-1.089844-7.632813-6.328125-13.890625-13.675781-16.335938-7.359375-2.453125-15.328125-.582031-20.796875 4.882813l-27.019531 26.996093c-3.382813 3.378907-7.867188 5.238282-12.636719 5.238282-.011719 0-.019531 0-.03125 0-4.738281-.007813-9.175781-1.855469-12.542969-5.238282l-16.613281-16.601562c-3.390625-3.386719-5.25-7.878906-5.246094-12.652344.007813-4.734375 1.859375-9.167968 5.265625-12.546875l27-27.066406c5.402344-5.398437 7.300781-13.269531 4.957031-20.542969-2.359374-7.3125-8.535156-12.621094-16.121093-13.859375l-.210938-.03125c-32.5625-4.84375-65.890625 6.144531-89.179687 29.414063-23.074219 23.148437-33.863282 54.976562-29.597656 87.359375.9375 6.972656-1.492188 14.117187-6.492188 19.113281l-49.660156 49.617188-80.210938-79.769532-32.960937-63.472656c-2.027344-3.90625-5.171875-7.035156-9.09375-9.054688l-62.640625-32.261718c-8.214844-4.234375-18.125-2.699219-24.667969 3.816406l-32.464844 32.324219c-6.574219 6.546875-8.117187 16.476562-3.835937 24.707031l32.433594 62.34375c2.023437 3.894531 5.160156 7.015625 9.066406 9.035156l63.714844 32.886719 80.28125 79.769531-171.914063 171.757813c-21.167969 21.152343-21.210937 55.609375-.089844 76.808593 10.273438 10.3125 23.949219 16 38.511719 16.019532h.066406c14.535156 0 28.199219-5.65625 38.480469-15.925782l150.054687-149.921874 145.277344 144.621093c14.152344 14.09375 32.746094 21.386719 51.335938 21.386719 18.59375 0 37.191406-7.292969 51.347656-21.394531 13.722656-13.671875 21-31.851563 20.996094-51.1875 0-19.339844-7.28125-37.515625-21.011719-51.183594zm-363.125-242.964844c-1.539063-1.527343-3.292969-2.808593-5.222656-3.804687l-62.4375-32.226563-28.128907-54.074219 23.292969-23.195312 54.429688 28.03125 32.296875 62.195312c1.007812 1.9375 2.300781 3.699219 3.855468 5.246094l81.136719 80.691406-17.929687 17.914063zm-56.097656 329.4375c-4.613281 4.605469-10.738281 7.144531-17.261719 7.140625-.007812 0-.019531 0-.027344 0-6.53125-.003906-12.667968-2.558594-17.273437-7.183594-9.472657-9.507812-9.453125-24.960937.039062-34.445312l281.949219-281.699219c11.582031-11.570312 17.195312-28.132812 15.023438-44.273437-3.035157-23.050782 4.660156-45.738282 21.09375-62.226563 11.574218-11.5625 26.140624-18.78125 41.777343-21.019531l-10.671875 10.699219c-9.054687 8.984375-14.054687 20.960937-14.074218 33.722656-.023438 12.800781 4.960937 24.847656 14.035156 33.910156l16.578125 16.5625c8.992187 9.046875 20.976562 14.039063 33.75 14.0625h.082031c12.785156 0 24.804688-4.980469 33.859375-14.023437l10.652344-10.640625c-2.25 15.59375-9.464844 30.121093-21.007813 41.652343-16.527344 16.441407-39.234375 24.128907-62.25 21.105469-16.1875-2.191406-32.773437 3.417969-44.367187 15zm398.046875-5.339843c-16.625 16.558593-43.679688 16.5625-60.308594.003906l-145.238281-144.582032 60.113281-60.0625 145.425781 144.753907c8.039063 8 12.464844 18.632812 12.464844 29.941406.003906 11.308594-4.421875 21.941406-12.457031 29.945313zm0 0"/></svg>
            </a>
            <a class="changelog-icon right" title="What's New?" @click="openChangelog()">
                <svg class="large" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"> <g> <g> <path d="M498.791,161.127c-17.545-17.546-46.094-17.545-63.645,0.004c-5.398,5.403-39.863,39.896-45.128,45.166V87.426 c0-12.02-4.681-23.32-13.181-31.819L334.412,13.18C325.913,4.68,314.612,0,302.592,0H45.018c-24.813,0-45,20.187-45,45v422 c0,24.813,20.187,45,45,45h300c24.813,0,45-20.187,45-45V333.631L498.79,224.767C516.377,207.181,516.381,178.715,498.791,161.127 z M300.019,30c2.834,0,8.295-0.491,13.18,4.393l42.426,42.427c4.76,4.761,4.394,9.978,4.394,13.18h-60V30z M360.018,467 c0,8.271-6.728,15-15,15h-300c-8.271,0-15-6.729-15-15V45c0-8.271,6.729-15,15-15h225v75c0,8.284,6.716,15,15,15h75v116.323 c0,0-44.254,44.292-44.256,44.293l-21.203,21.204c-1.646,1.646-2.888,3.654-3.624,5.863l-21.214,63.64 c-1.797,5.39-0.394,11.333,3.624,15.35c4.023,4.023,9.968,5.419,15.35,3.624l63.64-21.213c2.209-0.736,4.217-1.977,5.863-3.624 l1.82-1.82V467z M326.378,312.427l21.213,21.213l-8.103,8.103l-31.819,10.606l10.606-31.82L326.378,312.427z M368.8,312.422 l-21.213-21.213c11.296-11.305,61.465-61.517,72.105-72.166l21.213,21.213L368.8,312.422z M477.573,203.558l-15.463,15.476 l-21.213-21.213l15.468-15.481c5.852-5.849,15.366-5.848,21.214,0C483.426,188.19,483.457,197.673,477.573,203.558z"/> </g> </g> <g> <g> <path d="M285.018,150h-210c-8.284,0-15,6.716-15,15s6.716,15,15,15h210c8.284,0,15-6.716,15-15S293.302,150,285.018,150z"/> </g> </g> <g> <g> <path d="M225.018,210h-150c-8.284,0-15,6.716-15,15s6.716,15,15,15h150c8.284,0,15-6.716,15-15S233.302,210,225.018,210z"/> </g> </g> <g> <g> <path d="M225.018,270h-150c-8.284,0-15,6.716-15,15s6.716,15,15,15h150c8.284,0,15-6.716,15-15S233.302,270,225.018,270z"/> </g> </g> <g> <g> <path d="M225.018,330h-150c-8.284,0-15,6.716-15,15s6.716,15,15,15h150c8.284,0,15-6.716,15-15S233.302,330,225.018,330z"/> </g> </g> <g> <g> <path d="M285.018,422h-90c-8.284,0-15,6.716-15,15s6.716,15,15,15h90c8.284,0,15-6.716,15-15S293.302,422,285.018,422z"/> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg>
            </a>
        </div>
        <changelog></changelog>
    </header>
</template>

<script>
    import Changelog from "@/components/Changelog.vue";
    import SearchOptions from "@/components/SearchOptions.vue";
    export default {
        name: "topbar",
        components: {
            SearchOptions,
            Changelog
        },
        data() {
            return {
            }
        },
        methods: {
            openChangelog() {
                this.$root.$emit('openChangelog', {
                    closed: false,
                });
            },
            search() {
                let query = document.querySelector("#search-right-half").value;
                let dataset = document.querySelector(".selected-option").innerText.trim();

                if (query) {
                    switch(dataset) {
                        case 'Store Stock':
                            this.routeTo('/storestock/search/?query=' + query);
                            break;
                        case 'Big Buys/Sales':
                            this.routeTo('/buysale/search/?query=' + query);
                            break;
                        case 'Returns':
                            this.routeTo('/returns/search/?query=' + query);
                            break;
                    }

                    // Reset search content
                    document.querySelector("#search-right-half").value = "";
                }


            },
            routeTo(route) {
                // Refreshes the page if a query has already been submitted.
                if (window.location.hash.includes("?query=")) {
                    this.$router.push(route);
                    this.$router.go();
                }
                else {
                    this.$router.push(route);
                }
            },
        },
    }
</script>

<style scoped>
    header {
        width: 100%;
        position: unset;
        background-color: #f7f7f7;
    }

    #header {
        top: 0;
        height: 3.1rem;
        width: 12.5rem;
        background-color: #ededed;
        z-index: 2;
        position: fixed;
    }

    #site-logo {
        width: inherit;
        height: inherit;
        display: block;
        background-size: 70%;
        background-color: #ededed;
        background-position: center;
        margin-left: 1px;
    }

    #topbar {
        top: 0;
        left: 12.5rem;
        height: 3.05rem;
        width: 100%;
        background-color: #f8f7f7;
        position: fixed;
        z-index: 1;
    }

    #topbar, .ui {
        border-bottom: 1px solid #e0e0e0;
    }

    #search-bar {
        padding: 0.54rem;
        left: 2rem;
        height: 31px;
        position: relative;
        display: table;
    }

    #search-left-half {
        user-select: none;
        border-radius: 20px 0 0 20px;
        height: 29px;
        position: relative;
        background-color: #fff;
        border: 1px solid #ccc !important;
    }

    #search-icon {
        padding: 8px;
        position: absolute;
        color: #555;
        fill: #555;
        left: 0;
    }

    svg {
        margin-left: 3px;
        margin-right: 3px;
        height: 15px;
        width: 15px;
    }

    svg.large {
        height: 18px;
        width: 18px;
        fill: #222;
    }

    .caret {
        display: inline-block;
        position: relative;
        z-index: 3;
        width: 0;
        height: 0;
        left: -3px;
        vertical-align: middle;
        border: 4px solid;
        border-right: 4px solid transparent;
        border-left: 4px solid transparent;
        border-bottom: 4px solid transparent;
    }

    #search-right-half {
        height: 29px;
        border-radius: 0 20px 20px 0;
        border: 1px solid #ccc !important;
        border-left: 0 !important;
        padding: 0 2px;
        font-size: 15px;
        position: relative;
        bottom: 31px;
        left: 2.35rem;
        width: 218px;
        padding-left: 4px;
        font-family: 'Metropolis Regular';
        letter-spacing: -0.045rem;
    }

    .no-display {
        display: none;
    }

    .support-icon {
        position: relative;
        left: -16em;
        top: -4.15em;
    }

    .changelog-icon {
        position: relative;
        left: -17em;
        top: -4.15em;
    }
</style>